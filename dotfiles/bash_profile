# Prompt
export PS1='\w\$ '

if [[ -s /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-prompt.sh ]]; then
  source /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-prompt.sh
  export PS1='\w\$$(__git_ps1) '
fi

# Paths
export PATH="~/.dotfiles/bin:$PATH"
export PATH="$PATH:/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/"

# Override git-config "core.editor" to enforce vim when using SSH
if test -n "$SSH_CONNECTION"; then
  export GIT_EDITOR='vim'
fi

# Shell
alias reload='(source $HOME/.bash_profile && echo "sourced $HOME/.bash_profile") || echo "Could not source $HOME/.bash_profile"'
alias la='ls -lah'
alias ..='cd ..'

# Portable ls with colors
if ls --color -d . >/dev/null 2>&1; then
  alias ls='ls --color=auto'  # Linux
elif ls -G -d . >/dev/null 2>&1; then
  alias ls='ls -G'  # BSD/OS X
fi

# Ruby
export RUBYOPT=-Ku
alias be='bundle exec'

# Rails
alias r='rails'
alias tdev='tail -n 90 -f log/development.log'
alias ttest='tail -n 90 -f log/test.log'
alias g='be guard'
alias rst='touch tmp/restart.txt && echo touched tmp/restart.txt'

# Applications
function m {
  if [ -z "$1" ]
  then
    mate .
  else
    mate $1
  fi
}

function o {
  if [ -z "$1" ]
  then
    open .
  else
    open $1
  fi
}

# System
alias hosts='sudo mate /etc/hosts'
alias sshconf='mate ~/.ssh/config'
alias keys="open ~/.ssh"
alias online="ping -c 1 www.example.com &> /dev/null && echo 'Online :)' || echo 'Offline :('"
function diffx {
  `/Applications/Xcode.app/Contents/Applications/FileMerge.app/Contents/MacOS/FileMerge -left $1 -right $2`
}

function defa {
  defaults read > /tmp/defaults_a
}

function defb {
  defaults read > /tmp/defaults_b
  diff /tmp/defaults_a /tmp/defaults_b
}

# Projects
alias p="cd ~/Projects"
alias pa="cd ~/Projects/auktion"
alias pm="cd ~/Projects/market"
alias pe="cd ~/Projects/express"

# Git
alias gl="git pull --rebase"
alias gs="git status"
alias gd="git diff"  # What's changed but not yet added?
alias gdm="git diff | mate"
alias gdc="git diff --cached"  # What's added but not yet committed?
alias gdcm="git diff --cached | mate"
alias ga='git add --all'
alias gc="git commit -v"
alias gam="git commit --amend"
alias gco="git checkout"
alias gg='git grep'
alias gb="git branch"
alias gp='git push'
alias gpp='git pull --rebase && git push'
alias gcp="git cherry-pick"
alias gm='git merge'
alias gr='git remote show origin'
alias gu='git unstage'

if [[ -s /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-completion.bash ]]; then
  source /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-completion.bash
fi

function guser {
  if [ -z "$1" ]
  then
  echo "Current git configuration:"
    git config --get user.name
    git config --get user.email
  else
    echo "New git configuration:"
    git config user.name $1
    git config user.email $2
    git config --get user.name
    git config --get user.email
  fi
}

### BIOSPHERE MANAGED START ###

# Adding the "bio" executable to your path.
export PATH="~/.biosphere/core/bin:$PATH"

# Loading Biosphere's bash_profile for easier de-/activation of spheres.
[[ -s ~/.biosphere/augmentations/bash_profile ]] && source ~/.biosphere/augmentations/bash_profile

### BIOSPHERE MANAGED STOP ###
